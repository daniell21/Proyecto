
<p id="notice"><%= notice %></p>

<h1>Clientes</h1>

<br>
<br> 
    <div class="row">
      <div class="col-xs-4">
        <!--Busqueda de clientes por nombre-->
        <%= hidden_field_tag :direction, params[:search]%>
        <%= hidden_field_tag :sort, params[:sort]%>
        <label>Nombre</label>
        <%= form_tag clients_path, :method => 'get' do %>
          <p>
            <%= text_field_tag :search, params[:search], class: 'form-control'  %>
            <%= submit_tag "Buscar Cliente", :name => nil, :class => 'btn btn-default btn'   %>
          </p>
        <% end %>
        
      </div>    

      <div class="col-xs-4">
        <%= form_tag import_clients_path, multipart: true do %>
          <%= file_field_tag :file %>
          <%= submit_tag "Importar Clientes", :class => 'btn btn-default btn'   %>
        <% end %>
      </div>
      <div class="col-xs-4">
        <%= link_to "Generar pdf", "/clients.pdf", :format => 'pdf', target: :_blank, :class => 'btn btn-default btn'  %>
  <%= link_to "Exportar Clientes", clients_path(format: "xls"), :class => 'btn btn-default btn'   %>

        <%= link_to "Busqueda Avanzada", new_search_client_path, :class => 'btn btn-default btn'    %>
      </div>
    </div>
    
    
      <table class="table table-striped table-hover">
        
         
            <tr>
      <th><%=  sortable "code", "Código"%></th>
          <th><%=  sortable "rif", "RIF"%></th>
          <th><%=  sortable "name", "Nombre"%></th>
          <th><%=  sortable "socialReason", "Razón Social"%></th> 
          
          <th><%=  sortable "country", "País"%></th>
          <th><%=  sortable "state", "Estado"%></th>
      <th colspan="3"></th>
    </tr>
       
        <tbody>
    <% @clients.each do |client| %>
      <!--<tr data-link="<%= edit_client_path(client) %>">-->
       <tr link="<%= edit_client_path(client) %>">
       <td><%= client.code %></td>
        <td><%= client.rif %></td>
        <td><%= client.name %></td>
        <td><%= client.socialReason%></td>
        <td><%= client.completeCountry%></td>
        <td><%= client.state%></td>
        
        
        <% if can? :show, client %>
        
       
        <td> <%= link_to image_tag('/assets/showeye.ico'), client %></td>
        <%end%>
        <% if can? :edit, client %>
        <td><%= link_to image_tag('/assets/pencil.ico'), edit_client_path(client) %></td>
        <%end%>
        <% if can? :destroy, client %>
        <td><%= link_to image_tag('/assets/delete.ico'), client, method: :delete, data: { confirm: '¿Estas seguro?' } %></td>
        <%end%>
      </tr>
      
    <% end %>
  </tbody>
      </table>
      <div ALIGN=center>
    <%= will_paginate %>
    </div>
  </div>

<br>
<div ALIGN=right>
  <%= link_to 'Nuevo Cliente', new_client_path, :class => 'btn btn-default btn'  %>

</div>
<br>
<br>
</div>





